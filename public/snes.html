<!-- public/snes.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SNES.EXE</title>
  <style>
    html, body, #emu { margin:0; padding:0; width:100%; height:100%; background:black; display:flex; flex-direction:column; }
    #menu { background: rgba(0,0,0,0.9); padding: 0.5rem; color: var(--neon-cyan); font-family: 'Press Start 2P', monospace; display:flex; gap:1rem; }
    #menu button { background: transparent; border: 2px solid var(--neon-purple); padding:0.5rem; cursor:pointer; color: var(--neon-purple); }
    #emu { flex:1; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/emulatorjs@1.9.3/dist/emu.min.js"></script>
</head>
<body>
  <div id="menu">
    <!-- Buttons will be injected here -->
  </div>
  <div id="emu"></div>

  <script>
    // 1) List your games here:
    const games = {
      "Shadowrun": "https://cdn.glitch.global/09e9ba26-fd4e-41f2-88c1-651c3d32a01a/Shadowrun%20(USA).sfc?v=1746468888283",  
      "New Horizons":        "https://cdn.glitch.global/09e9ba26-fd4e-41f2-88c1-651c3d32a01a/New%20Horizons%20(USA).sfc?v=1746467603953"
      // â†’ add more key: URL pairs as needed
    };

    const menu = document.getElementById("menu"),
          emuContainer = document.getElementById("emu");
    let dos;  // our EmulatorJS instance

    // 2) Build the selector buttons
    Object.entries(games).forEach(([name, url]) => {
      const btn = document.createElement("button");
      btn.textContent = name;
      btn.onclick = () => loadGame(url);
      menu.appendChild(btn);
    });

    // 3) Load a game (destroys old instance if any)
    function loadGame(romUrl) {
      // clear old
      emuContainer.innerHTML = "";
      // spin up a fresh emulator
      dos = new EmulatorJS({
        element: emuContainer,
        system:  'snes',
        rom:      romUrl,
        onStart:  () => console.log("Loaded", romUrl),
        onError:  e => console.error("Emu error", e)
      });
    }

    // 4) Auto-load the first one
    window.addEventListener("DOMContentLoaded", () => {
      const firstUrl = Object.values(games)[0];
      if (firstUrl) loadGame(firstUrl);
    });
  </script>
</body>
</html>
